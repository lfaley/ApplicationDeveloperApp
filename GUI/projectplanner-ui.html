<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProjectPlanner - Unified GUI</title>
  <link rel="stylesheet" href="context-agent-ui.css">
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #e0f2fe;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    .glass {
      background: rgba(30, 41, 59, 0.7);
      border-radius: 18px;
      box-shadow: 0 8px 32px 0 rgba(0,0,0,0.37);
      border: 1px solid rgba(255,255,255,0.18);
      backdrop-filter: blur(8px);
      padding: 2rem;
      margin: 2rem auto;
      max-width: 900px;
    }
    h1, h2 {
      color: #00d9ff;
      text-shadow: 0 2px 8px #0099ff44;
    }
    .section {
      margin-bottom: 2rem;
    }
    .button {
      background: linear-gradient(90deg, #00d9ff 0%, #0099ff 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px #0099ff44;
      margin-right: 1rem;
      margin-bottom: 1rem;
      transition: background 0.2s;
    }
    .button:hover {
      background: linear-gradient(90deg, #0099ff 0%, #00d9ff 100%);
    }
    .input {
      background: #1e293b;
      color: #e0f2fe;
      border: 1px solid #0099ff;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin-bottom: 1rem;
      width: 100%;
      box-sizing: border-box;
    }
    .panel {
      background: rgba(15,23,42,0.8);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px #0099ff22;
    }
    .flex {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }
    @media (max-width: 900px) {
      .glass { max-width: 98vw; }
      .flex { flex-direction: column; gap: 1rem; }
    }
  </style>
</head>
<body>
  <div class="glass">
    <h1>ProjectPlanner</h1>
    <h2>Unified Project Setup & Documentation Automation</h2>
    <div class="section panel">
      <h3>New Project Creation</h3>
      <form id="new-project-form" enctype="multipart/form-data">
        <input class="input" type="text" placeholder="Project Name" name="projectName" required>
        <input class="input" type="text" placeholder="Destination Path" name="projectPath" required>
        <select class="input" name="framework">
          <option value="">Select Framework</option>
          <option value="React">React</option>
          <option value="Next.js">Next.js</option>
          <option value="Node.js">Node.js</option>
          <option value="Python">Python</option>
          <option value="C#">C#</option>
        </select>
        <div id="env-vars">
          <label>Environment Variables:</label>
          <input class="input" type="text" name="envKey1" placeholder="KEY">
          <input class="input" type="text" name="envVal1" placeholder="VALUE">
        </div>
        <select name="license" class="input">
          <option value="">No License</option>
          <option value="MIT">MIT</option>
          <option value="Apache">Apache</option>
          <option value="GPL">GPL</option>
        </select>
        <label><input type="checkbox" name="includeDocs" checked> Include Documentation Templates</label>
        <label><input type="checkbox" name="initGit" checked> Initialize Git Repository</label>
        <label><input type="checkbox" name="createGitHub"> Create GitHub Repository</label>
        <label>Custom Template (zip): <input class="input" type="file" name="customTemplate" accept=".zip"></label>
        <button class="button" type="submit">Create Project</button>
      </form>
    </div>
    <div class="section panel">
      <h3>Existing Project Assessment</h3>
      <form id="existing-project-form">
        <input class="input" type="text" placeholder="Repository Path" name="repoPath" required>
        <button class="button" type="submit">Assess Project</button>
      </form>
    </div>
    <div class="section panel">
      <h3>Documentation Automation</h3>
      <form id="doc-automation-form">
        <input class="input" type="text" placeholder="Project Path" name="docPath" required>
        <button class="button" type="submit">Generate/Sync Documentation</button>
      </form>
    </div>
    <div class="section panel">
      <h3>Context Agent Tools</h3>
      <div class="flex">
        <button class="button">Detect Drift</button>
        <button class="button">Health Check</button>
        <button class="button">Suggest Updates</button>
        <button class="button">Auto Sync</button>
      </div>
      <input class="input" type="text" placeholder="Repository Path">
      <button class="button">Run Tool</button>
    </div>
    <div class="section panel">
      <h3>Results</h3>
      <div id="results" style="min-height:100px;"></div>
    </div>
    <div class="section" style="text-align:center;opacity:0.7;font-size:0.9em;">
      ProjectPlanner v1.0 | Modern Web UI | Node.js Backend<br>
      &copy; 2025 ProjectPlanner | All features unified
    </div>
  </div>
  <script>
    // Connect New Project Creation form to backend
    document.getElementById('new-project-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      const form = e.target;
      const resultsDiv = document.getElementById('results');
      // Show progress indicator
      resultsDiv.innerHTML = '<span style="color:#00d9ff">Creating project...</span>';
      // Client-side validation
      if (!form.projectName.value.trim() || !form.projectPath.value.trim() || !form.framework.value) {
        resultsDiv.innerHTML = '<b style="color:#ff4c4c">Please fill in all required fields and select a framework.</b>';
        return;
      }
      const formData = new FormData(form);
      const data = {
        projectName: form.projectName.value,
        projectPath: form.projectPath.value,
        framework: form.framework.value,
        includeDocs: form.includeDocs.checked,
        initGit: form.initGit.checked,
        createGitHub: form.createGitHub.checked,
        envVars: [
          { key: form.envKey1.value, value: form.envVal1.value }
        ],
        license: form.license.value
      };
      try {
        const res = await fetch('/api/create-project', {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        });
        const result = await res.json();
        let logHtml = '';
        if (result.setupLog && Array.isArray(result.setupLog)) {
          logHtml = '<ul style="margin-top:1em;color:#e0f2fe">' + result.setupLog.map(l => `<li>${l}</li>`).join('') + '</ul>';
        }
        if (result.success) {
          resultsDiv.innerHTML = `<b style="color:#00ff99">Project created:</b> ${result.projectPath}<br>${result.githubResult || ''}${logHtml}`;
        } else {
          resultsDiv.innerHTML = `<b style="color:#ff4c4c">Error:</b> ${result.error}${logHtml}`;
        }
      } catch (err) {
        resultsDiv.innerHTML = `<b style="color:#ff4c4c">Network error:</b> ${err.message}`;
      }
    });
  </script>
</body>
</html>
